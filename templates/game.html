{% extends 'layout.html' %}
{% set active_page = 'game' %}
{% block styles %}

    <link href='{{url_for("static", filename="stylesheets/layout.css")}}' rel='stylesheet'/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
{% endblock %}

{% block content %}
<div id="maingame"> <!--starts shown and is hidden once game is completed-->
    <div>
        <h2>Current word:</h2>
        <h1 id="currentWord">test</h1>
        <input type="text" id="maininputbox">
        <br>
        <p id="wordsToGo">Words left: {{wordNumber}}</p>
        <div id="skipEnabled">
            <button class="gamebtnone" id="skipButton">Pass</button>
            <p>(You can also press the spacebar to skip)</p>
            <p id="skipCounter">Words skipped: 0</p>
        </div>
        <p id="gameTimer"></p>
    </div>
</div>
<div id="aftergame"><!--starts hidden and is shown once game is completed-->
    <p>Congrats! You finished!</p>
    <p id="endingType">b</p>
    <p id="WPMCounter"></p>
    <button class="gamebtnone" onclick="submitScores()">Submit</button> <!-- (console logs but no actual submitting)-->
</div>

<br>
<a href="{{url_for('home')}}">
    <button class="be homebtn">Home
        <i class="bi bi-house-fill"></i>
    </button>
</a>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='javascript/home.js') }}"></script>
<script src="{{ url_for('static', filename='javascript/words.js') }}"></script>

<script>
    var wordNumber = parseInt("{{wordNumber}}");
    var time = parseInt("{{gameTime}}");
    var difficulty = parseInt("{{difficulty}}");
    var togglePassing = "{{togglePassing}}";
    var wordsLeft = wordNumber;
    var timer = time * 60;
    var wordArray = [];
    var skippedArray = [];
    var gameFailure = false;
    console.log("Number of words: "+wordNumber+" \nAmount of time:"+time+"\nDifficulty:"+difficulty+"\nAllow passing: "+togglePassing);
    startGame(wordNumber, time, difficulty, togglePassing);
    timerInterval = setInterval(function() {
        timerDown();
        if (timer <= 0){
            clearInterval(timerInterval);
        }
    }, 1000);
    window.onload = function(){
        document.getElementById("aftergame").style.display = "none";
    }

</script>

{% endblock %}